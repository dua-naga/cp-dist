import{d as z,f as G,g as q,j as E,h as a,n as L,a as n,ab as O,ac as Q,ad as W,ae as X,u as Y,s as I,af as Z,ag as ee,ah as ae,p as te,ai as se,aj as re,ak as oe,w as A,e as d,b as s,c as y,k as le,F as U,m as K,t as p,al as ne,i as ie}from"./index-CQMZ4DIC.js";import{V as ce,B as de,_ as ue}from"./DataNotFound.vue_vue_type_script_setup_true_lang-CeYRbfTD.js";import{u as pe}from"./cart-BXpEjiEF.js";import{u as fe,A as me}from"./entity-n1c3MTrH.js";import{_ as ve,s as ye}from"./AppPaginator.vue_vue_type_script_setup_true_lang-DohR2ZfG.js";import{u as ge}from"./title-BypgHocM.js";import{s as xe}from"./index-CHoNh2rR.js";import{a as _e,s as he}from"./index-D68owcEu.js";import{s as be}from"./index-LFAqFL6p.js";import"./Api-Bk6rAXs-.js";import"./index-CHoQ5V91.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DC1CPGc6.js";import"./index-BButYel8.js";import"./index-CHaQEhUy.js";import"./index-BJnIrkL7.js";import"./index-Cb3hevBO.js";const M=z({__name:"AddToCart",props:{cartType:{default:"product"},variant:{}},setup(C){const r=C,{t:f}=G(),g=pe(),i=q(!1),m=q(!1),x=async()=>{var u,o,v;i.value=!0,await new Promise(T=>setTimeout(T,250)),g.addItem({cartable_id:r.variant.id,cartable_type:r.cartType,cartable:r.variant,name:`${(o=(u=r.variant.product)==null?void 0:u.brand)==null?void 0:o.name} ${(v=r.variant.product)==null?void 0:v.name} - ${r.variant.name}`,price:0,qty:1e3}),i.value=!1,m.value=!0,setTimeout(()=>{m.value=!1},1500)};return(u,o)=>(n(),E(a(L),{type:"button",icon:m.value?"pi pi-check-circle":"pi pi-plus",size:"small",label:a(f)("cart"),class:"w-full sm:w-auto",loading:i.value,disabled:i.value,onClick:x},null,8,["icon","label","loading","disabled"]))}}),we=O("variant",()=>{const{entities:C,selected:r,meta:f,links:g,loading:i,refetch:m,notFound:x}=fe(),{storagePrefix:u}=W(),o=Q(`${u}my_products_layout_mode`,"list");return{variants:C,selected:r,meta:f,links:g,loading:i,refetch:m,notFound:x,layout:o}}),ke={class:"flex w-full flex-col gap-4 md:flex-row md:items-center md:justify-between"},$e={class:"text-lg font-bold"},Ve={class:"flex w-full flex-col gap-2 md:w-auto md:flex-row md:items-center md:gap-4"},Be={class:"flex items-center gap-2"},Se={class:"divide-surface-200 border-y-surface-200 flex flex-col divide-y border-y border-t"},qe={key:0,class:"grid grid-cols-1 gap-4 py-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5"},Ce={class:"mt-4 flex-1"},Te={class:"text-xs font-semibold tracking-wide text-gray-500 uppercase"},je={class:"font-bold"},Ae={class:"text-sm text-gray-600"},Ee={key:1,class:"divide-surface-200 border-y-surface-200 flex flex-col divide-y"},Fe={class:"flex flex-1 flex-col gap-4"},Pe={class:"text-xs font-semibold tracking-wide text-gray-500 uppercase"},Re={class:"text-lg font-bold"},Ue={class:"text-sm text-gray-600"},Le={class:"flex justify-end sm:items-end"},ta=z({__name:"MyProductsPage",setup(C){const{t:r}=G();ge(r("my_products"));const f=ee(),g=ie(),i=X(),m=Y(),x=we(),{user:u}=I(m),{variants:o,meta:v,links:T,refetch:N,loading:_,notFound:F,layout:h}=I(x),b=q([]),P=q(null),w=q(null),j=Z(()=>f.query);ae(N,l=>{l&&R(j.value)}),te(()=>{w.value=j.value.search,R(j.value),D(j.value)}),se(()=>{o.value=[],v.value=null,T.value=null}),re(l=>{const t=l.query;w.value=t.search,R(t),D(t)});const R=async l=>{var t;N.value=!1,F.value=!1,_.value=!0;try{const e=await ce.paginate({...l,customer:(t=u.value.customer)==null?void 0:t.id});o.value=e.data,v.value=e.meta,T.value=e.links,o.value.length<1&&(F.value=!0)}catch(e){const c=e;i.add({severity:"error",summary:c.message})}finally{_.value=!1}},D=async l=>{var t;_.value=!0;try{const e=await de.get({customer:((t=u.value.customer)==null?void 0:t.id)??"88"});b.value=e,b.value.unshift({name:r("all_data",{data:r("brand")}),id:0}),P.value=b.value.find(c=>c.id.toString()===l.brand)??b.value[0]}catch(e){const c=e;i.add({severity:"error",summary:c.message})}finally{_.value=!1}},H=()=>{g.push({query:{...f.query,page:void 0,search:w.value}})},J=l=>{g.push({query:{...f.query,page:void 0,brand:l.id===0?void 0:l.id}})};return(l,t)=>(n(),E(a(xe),{"pt:root:class":"flex! flex-col h-full justify-between","pt:content-container:class":"flex! flex-col flex-1","pt:content:class":"flex-1"},oe({header:A(()=>[s("div",ke,[s("div",$e,p(a(r)("my_products")),1),s("div",Ve,[d(a(ye),{modelValue:P.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>P.value=e),J],options:b.value,"option-label":"name",placeholder:a(r)("choose_data",{data:a(r)("brand")}),class:"w-full md:w-auto"},null,8,["modelValue","options","placeholder"]),d(a(he),{class:"w-full"},{default:A(()=>[d(a(_e),{class:"pi pi-search"}),d(a(be),{modelValue:w.value,"onUpdate:modelValue":t[1]||(t[1]=e=>w.value=e),type:"search",placeholder:a(r)("search_data",{data:a(r)("product")}),class:"w-full",onKeyup:ne(H,["enter"])},null,8,["modelValue","placeholder"])]),_:1}),s("div",Be,[d(a(L),{icon:"pi pi-bars",outlined:"",severity:a(h)==="list"?"primary":"secondary",onClick:t[2]||(t[2]=e=>h.value="list")},null,8,["severity"]),d(a(L),{icon:"pi pi-th-large",outlined:"",severity:a(h)==="grid"?"primary":"secondary",onClick:t[3]||(t[3]=e=>h.value="grid")},null,8,["severity"])])])])]),default:A(()=>[s("div",Se,[a(o).length?(n(),y(U,{key:0},[a(h)==="grid"?(n(),y("div",qe,[(n(!0),y(U,null,K(a(o),(e,c)=>{var k,$,V,B,S;return n(),y("div",{key:c,class:"flex flex-col justify-between rounded-xl border border-gray-200 p-4 shadow-sm"},[t[4]||(t[4]=s("div",{class:"bg-surface-200 flex aspect-square w-full items-center justify-center rounded text-gray-400"},[s("i",{class:"pi pi-image text-4xl"})],-1)),s("div",Ce,[s("div",Te,p(($=(k=e.product)==null?void 0:k.brand)==null?void 0:$.name),1),s("div",je,p((V=e.product)==null?void 0:V.name)+" - "+p(e.name),1),s("div",Ae,p((S=(B=e.product)==null?void 0:B.product_category)==null?void 0:S.name),1)]),d(M,{variant:e,class:"mt-4"},null,8,["variant"])])}),128))])):(n(),y("div",Ee,[(n(!0),y(U,null,K(a(o),(e,c)=>{var k,$,V,B,S;return n(),y("div",{key:c,class:"hover:bg-surface-100 flex w-full flex-col gap-4 p-4 sm:flex-row"},[t[5]||(t[5]=s("div",{class:"bg-surface-200 flex aspect-square w-full max-w-[100px] items-center justify-center overflow-hidden rounded"},[s("i",{class:"pi pi-image text-4xl"})],-1)),s("div",Fe,[s("div",Pe,p(($=(k=e.product)==null?void 0:k.brand)==null?void 0:$.name),1),s("div",null,[s("div",Re,p(`${(V=e.product)==null?void 0:V.name} - ${e.name}`),1),s("div",Ue,p((S=(B=e.product)==null?void 0:B.product_category)==null?void 0:S.name),1)])]),s("div",Le,[d(M,{variant:e},null,8,["variant"])])])}),128))]))],64)):a(_)?(n(),E(me,{key:1})):a(F)?(n(),E(ue,{key:2})):le("",!0)])]),_:2},[a(v)?{name:"footer",fn:A(()=>[d(ve,{meta:a(v)},null,8,["meta"])]),key:"0"}:void 0]),1024))}});export{ta as default};
