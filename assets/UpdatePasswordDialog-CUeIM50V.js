import{h as U,z as m,a as _,s as B}from"./external-DdTIO0xL.js";import{d as S,f as A,ae as P,g as j,j as u,w as t,b as l,e as r,k as w,h as s,t as d,l as v,n as z,aO as R,a as c}from"./index-ChONLvXT.js";import{A as T}from"./Auth-B9Jbpmoe.js";import{s as g}from"./index-CzwXDw33.js";import{s as y}from"./index-Cb3a1vIw.js";import"./Api-CpiGTlUC.js";import"./index-eK114hG5.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Co_Ra3NM.js";import"./index-DNrJJ1ap.js";const E={class:"mt-2 flex flex-col gap-1"},F={for:"old_password"},I={class:"flex flex-col gap-1"},O={for:"password"},q={class:"flex flex-col gap-1"},G={for:"password_confirmation"},H={class:"mt-4 flex justify-end gap-2"},ss=S({__name:"UpdatePasswordDialog",setup(J){const C=R("dialogRef"),{t:i}=A(),b=P(),a=j({old_password:"",password:"",password_confirmation:""}),f=j(!1),D=U(m.object({old_password:m.string(),password:m.string().min(8),password_confirmation:m.string()}).refine(n=>n.password===n.password_confirmation,{message:i("password_must_match"),path:["password_confirmation"]})),x=()=>{C.value.close()},N=async n=>{if(n.valid){f.value=!0;try{const{message:e}=await T.updatePassword({old_password:a.value.old_password,password:a.value.password,password_confirmation:a.value.password_confirmation});b.add({severity:"success",summary:e}),x()}catch(e){const o=e;b.add({severity:"error",summary:o.message,life:3e3})}finally{f.value=!1}}};return(n,e)=>(c(),u(s(B),{"initial-values":a.value,resolver:s(D),class:"flex flex-col gap-4 md:w-[400px]",onSubmit:N},{default:t(o=>{var k,V,h;return[l("div",E,[r(s(_),{variant:"on"},{default:t(()=>[r(s(g),{id:"old_password",modelValue:a.value.old_password,"onUpdate:modelValue":e[0]||(e[0]=p=>a.value.old_password=p),type:"text",name:"old_password",feedback:!1,"toggle-mask":"",fluid:""},null,8,["modelValue"]),l("label",F,d(s(i)("old_password")),1)]),_:1}),(k=o.old_password)!=null&&k.invalid?(c(),u(s(y),{key:0,severity:"error",size:"small",variant:"simple"},{default:t(()=>[v(d(o.old_password.error.message),1)]),_:2},1024)):w("",!0)]),l("div",I,[r(s(_),{variant:"on"},{default:t(()=>[r(s(g),{id:"password",modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=p=>a.value.password=p),type:"text",name:"password",feedback:!1,"toggle-mask":"",fluid:""},null,8,["modelValue"]),l("label",O,d(s(i)("password")),1)]),_:1}),(V=o.password)!=null&&V.invalid?(c(),u(s(y),{key:0,severity:"error",size:"small",variant:"simple"},{default:t(()=>[v(d(o.password.error.message),1)]),_:2},1024)):w("",!0)]),l("div",q,[r(s(_),{variant:"on"},{default:t(()=>[r(s(g),{id:"password_confirmation",modelValue:a.value.password_confirmation,"onUpdate:modelValue":e[2]||(e[2]=p=>a.value.password_confirmation=p),type:"text",name:"password_confirmation",feedback:!1,"toggle-mask":"",fluid:""},null,8,["modelValue"]),l("label",G,d(s(i)("confirm_password")),1)]),_:1}),(h=o.password_confirmation)!=null&&h.invalid?(c(),u(s(y),{key:0,severity:"error",size:"small",variant:"simple"},{default:t(()=>[v(d(o.password_confirmation.error.message),1)]),_:2},1024)):w("",!0)]),l("div",H,[r(s(z),{type:"button",label:s(i)("cancel"),severity:"secondary",onClick:x},null,8,["label"]),r(s(z),{type:"submit",label:s(i)("save"),loading:f.value},null,8,["label","loading"])])]}),_:1},8,["initial-values","resolver"]))}});export{ss as default};
