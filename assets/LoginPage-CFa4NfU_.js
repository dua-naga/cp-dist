import{d as F,f as I,u as L,g,c as x,b as r,e as t,w as l,h as e,i as U,a as u,j as _,k as w,l as V,t as d,F as M,m as P,n as T}from"./index-ChONLvXT.js";import{h as W,z as h,s as q,a as S}from"./external-DdTIO0xL.js";import{A as $}from"./Auth-B9Jbpmoe.js";import{_ as D}from"./AppLogo.vue_vue_type_script_setup_true_lang-Co_Ra3NM.js";import{u as R}from"./title-B0mAHwLg.js";import{u as Y}from"./cart-n70GHfAL.js";import{s as y}from"./index-Cb3a1vIw.js";import{s as B,a as C}from"./index-D-iBg07O.js";import{s as G}from"./index-DNrJJ1ap.js";import{s as H}from"./index-CzwXDw33.js";import"./Api-CpiGTlUC.js";import"./index-eK114hG5.js";const J={class:"min-h-dvh overflow-y-auto bg-white p-8 md:p-12 lg:p-24"},K={class:"flex h-full flex-col items-center justify-between gap-16"},O={class:"flex flex-col gap-1"},Q={for:"email"},X={class:"flex flex-col gap-1"},Z={for:"password"},ee={class:"my-0 flex list-disc flex-col gap-1 px-4"},fe=F({__name:"LoginPage",setup(se){const{t:m}=I();R(m("login"));const z=U(),b=L(),E=Y(),i=g({username:"",password:""}),v=g(!1),c=g(null),N=W(h.object({username:h.string(),password:h.string().min(3,{message:"Minimum 8 characters."}).refine(p=>/[a-z]/.test(p),{message:"Must have a lowercase letter."})})),j=async p=>{var s;if(p.valid){v.value=!0;try{const a=await $.authenticate(i.value);if(!((s=a.user.roles)!=null&&s.map(f=>f.name).includes("customer")))throw new Error(m("invalid_credentials"));b.authenticate({token:a.token,user:a.user});const o=await $.me({includes:"customer"});b.user=o,E.setUserId(o.id.toString()),z.push({name:"auth.redirect"})}catch(a){const o=a;c.value=o.message}finally{v.value=!1}}};return(p,s)=>(u(),x("div",J,[r("div",K,[t(D),t(e(q),{"initial-values":i.value,resolver:e(N),class:"mx-auto flex w-full max-w-md flex-col gap-4",onSubmit:j},{default:l(a=>{var o,f,k;return[s[3]||(s[3]=r("div",{class:"space-y-2"},[r("div",{class:"text-center text-2xl font-bold"},"Welcome"),r("div",{class:"text-center text-sm text-slate-600"}," Welcome Back, Please enter Your details ")],-1)),(o=c.value)!=null&&o.length?(u(),_(e(y),{key:0,severity:"error",icon:"pi pi-times-circle",closable:"",onClose:s[0]||(s[0]=n=>c.value=null)},{default:l(()=>[V(d(c.value),1)]),_:1})):w("",!0),r("div",O,[t(e(S),{variant:"in"},{default:l(()=>[t(e(B),null,{default:l(()=>[t(e(C),{class:"pi pi-at"}),t(e(G),{id:"email",modelValue:i.value.username,"onUpdate:modelValue":s[1]||(s[1]=n=>i.value.username=n),name:"username",fluid:""},null,8,["modelValue"])]),_:1}),r("label",Q,d(e(m)("email")),1)]),_:1}),(f=a.username)!=null&&f.invalid?(u(),_(e(y),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[V(d(a.username.error.message),1)]),_:2},1024)):w("",!0)]),r("div",X,[t(e(S),{variant:"in"},{default:l(()=>[t(e(B),null,{default:l(()=>[t(e(C),{class:"pi pi-unlock"}),t(e(H),{id:"password",modelValue:i.value.password,"onUpdate:modelValue":s[2]||(s[2]=n=>i.value.password=n),type:"text",name:"password",feedback:!1,"toggle-mask":"",fluid:""},null,8,["modelValue"])]),_:1}),r("label",Z,d(e(m)("password")),1)]),_:1}),(k=a.password)!=null&&k.invalid?(u(),_(e(y),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[r("ul",ee,[(u(!0),x(M,null,P(a.password.errors,(n,A)=>(u(),x("li",{key:A},d(n.message),1))),128))])]),_:2},1024)):w("",!0)]),t(e(T),{type:"submit",label:e(m)("login"),loading:v.value},null,8,["label","loading"])]}),_:1,__:[3]},8,["initial-values","resolver"]),s[4]||(s[4]=r("div",{class:"text-sm text-slate-600"}," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Impedit, accusamus blanditiis officiis asperiores optio magnam sed provident eum inventore enim ut odio unde a ipsam aliquid porro, facere et totam! ",-1))])]))}});export{fe as default};
