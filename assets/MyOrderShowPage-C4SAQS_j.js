import{d as O,f as E,s as L,af as R,ag as T,ah as V,p as Y,ao as q,c as l,e as _,ak as z,w as f,h as e,b as t,n as A,r as F,z as I,t as s,j as P,k as x,F as b,m as w,l as k,a as o}from"./index-ChONLvXT.js";import{u as $,a as U,M as G,_ as H}from"./my-order-CGQIu1x0.js";import{A as J}from"./entity-CQGiqWbH.js";import{u as K}from"./date-C6AYuyTo.js";import{u as Q}from"./number-DM6olJge.js";import{u as W}from"./title-B0mAHwLg.js";import{s as X}from"./index-B0G3N2AP.js";import"./Api-CpiGTlUC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"mx-auto max-w-5xl"},tt={class:"flex w-full flex-col items-start justify-between gap-4 md:flex-row md:items-center"},et={class:"divide-surface-400 flex flex-col items-start justify-end gap-1 md:flex-row md:items-center md:gap-2 md:divide-x"},st={class:"truncate pr-2 text-sm font-semibold text-gray-800"},at={class:"truncate text-sm text-gray-500"},rt={class:"flex flex-col-reverse gap-4 sm:flex-row sm:items-center sm:justify-between"},ot={class:"text-sm text-gray-600"},lt={class:"font-medium text-gray-800"},nt={class:"flex flex-wrap items-center gap-2"},dt={class:"text-sm text-gray-700"},ct={class:"text-sm font-medium text-gray-900"},it={class:"mt-4 grid grid-cols-1"},ut={class:"space-y-3"},_t={class:"flex-1"},ft={class:"text-sm font-medium text-gray-900"},mt={class:"text-xs text-gray-500"},xt={key:0},pt={key:0,class:"text-sm whitespace-nowrap text-gray-800"},ht={class:"mt-4 flex h-full w-full flex-col justify-end justify-self-end"},yt={key:0,class:"mb-4 text-left sm:text-right"},gt={class:"text-xs text-gray-500"},vt={class:"text-sm font-bold text-yellow-700"},bt={key:1,class:"w-full text-sm text-gray-800"},wt={class:"text-surface-600 py-2 text-left tracking-wide"},kt={class:"py-2 text-right"},jt={class:"text-surface-600 py-2 text-left tracking-wide"},Mt={class:"py-2 text-right"},Nt={class:"text-surface-600 py-2 text-left tracking-wide"},Ct={class:"py-2 text-right"},Dt={class:"border-t border-gray-300 font-bold"},St={class:"py-2 text-left tracking-wide"},Bt={class:"py-2 text-right"},Ot={class:"text-yellow-700"},It=O({__name:"MyOrderShowPage",setup(Et){const{t:a}=E(),j=W(a("details_data",{data:a("order")})),M=T(),{toastError:N}=$(),{formatDate:C}=K(),{formatNumber:n}=Q(),D=U(),{selected:d,loading:m,refetch:p}=L(D),S=R(()=>Number(M.params.id));V(p,c=>{c&&h()}),Y(()=>{h()}),q(()=>{d.value=null});const h=async()=>{p.value=!1,m.value=!0;try{const c=await G.show(S.value);d.value=c,j.value=a("details_data",{data:a("order_data",{data:c.number})})}catch(c){N(c.message)}finally{m.value=!1}};return(c,u)=>{const B=F("RouterLink");return o(),l("div",Z,[_(e(X),{"pt:root:class":"flex flex-col h-full justify-between","pt:content-container:class":"flex flex-col flex-1","pt:content:class":"flex-1"},z({default:f(()=>[e(d)?(o(!0),l(b,{key:0},w(e(d).sales_orders,r=>{var y;return o(),l("div",{key:r.id,class:"border-surface-200 bg-surface-50 rounded border px-3 py-4"},[t("div",rt,[t("div",ot,[k(s(e(a)("brand"))+": ",1),t("span",lt,s((y=r.brand)==null?void 0:y.name),1)]),t("div",nt,[t("span",dt,s(e(C)(new Date(r.date),"DD MMM YYYY")),1),_(H,{value:r.state},null,8,["value"]),t("span",ct,s(r.number),1)])]),t("div",it,[t("div",ut,[(o(!0),l(b,null,w(r.items,i=>{var g,v;return o(),l("div",{key:i.id,class:"flex items-start gap-3"},[u[1]||(u[1]=t("div",{class:"bg-surface-200 flex aspect-square w-[50px] items-center justify-center overflow-hidden rounded"},[t("i",{class:"pi pi-image text-4xl"})],-1)),t("div",_t,[t("div",ft,s((g=i.product)==null?void 0:g.name)+" - "+s((v=i.variant)==null?void 0:v.name),1),t("div",mt,[k(s(e(n)(i.quantity))+" PCS ",1),r.state!=="unconfirmed"?(o(),l("span",xt," Ã— "+s(e(n)(i.price,!0)),1)):x("",!0)])]),r.state!=="unconfirmed"?(o(),l("div",pt,s(e(n)(i.quantity*i.price,!0)),1)):x("",!0)])}),128))]),t("div",ht,[r.state==="unconfirmed"?(o(),l("div",yt,[t("div",gt,s(e(a)("total_data",{data:e(a)("order")})),1),t("div",vt,s(e(a)("under_negotiation")),1)])):(o(),l("table",bt,[t("tbody",null,[t("tr",null,[t("td",wt,s(e(a)("subtotal")),1),t("td",kt,s(e(n)(r.subtotal,!0)),1)]),t("tr",null,[t("td",jt,s(e(a)("tax_base")),1),t("td",Mt,s(e(n)(r.tax_base,!0)),1)]),t("tr",null,[t("td",Nt,s(e(a)("tax")),1),t("td",Ct,s(e(n)(r.tax,!0)),1)]),t("tr",Dt,[t("td",St,s(e(a)("total_data",{data:e(a)("order")})),1),t("td",Bt,[t("span",Ot,s(e(n)(r.total,!0)),1)])])])]))])])])}),128)):e(m)?(o(),P(J,{key:1})):x("",!0)]),_:2},[e(d)?{name:"header",fn:f(()=>[t("div",tt,[_(e(A),{size:"small",outlined:"","as-child":""},{default:f(r=>[_(B,{to:{name:"my-orders"},class:I(r.class)},{default:f(()=>[u[0]||(u[0]=t("span",{class:"pi pi-arrow-circle-left"},null,-1)),t("span",null,s(e(a)("back")),1)]),_:2,__:[0]},1032,["class"])]),_:1}),t("div",et,[t("div",st,s(e(a)("number_data",{data:e(a)("order")}))+". "+s(e(d).number),1),t("div",at,s(e(d).external_number||"-"),1)])])]),key:"0"}:void 0]),1024)])}}});export{It as default};
