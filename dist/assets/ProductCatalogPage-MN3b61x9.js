const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CatalogProductDetailsDialog-Ddu_XRzM.js","assets/index-BuIkzTbX.js","assets/index-6LtYeXJq.css","assets/DataNotFound.vue_vue_type_script_setup_true_lang-BmhRtrIo.js","assets/cart-Cpwgim7R.js","assets/index-CMhtJUBl.js","assets/AppLoading-DSuPZYIK.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/app-toast-C5pjiAmH.js","assets/Api-D_vvPt4a.js","assets/CatalogProductCategory-BS1myWOu.js","assets/AppPaginator.vue_vue_type_script_setup_true_lang-UhejqkUD.js","assets/index-FvBsrFbw.js","assets/index-DscL36h5.js","assets/index-C9JuvMH3.js","assets/index-CgPAqISb.js","assets/index-BLcXtIKv.js","assets/index-BHGLoDXq.js","assets/index-Ahr_tNbb.js","assets/title-DTf3XjVI.js","assets/entity-BPHdmNvU.js","assets/index-lvVUb5mS.js"])))=>i.map(i=>d[i]);
var W=Object.defineProperty;var X=(i,s,c)=>s in i?W(i,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[s]=c;var N=(i,s,c)=>X(i,typeof s!="symbol"?s+"":s,c);import{ah as Y,ai as Z,A as ee,d as te,f as se,a3 as ae,u as oe,s as O,g as B,B as le,C as re,z as ce,x as ie,aj as ne,ak as ue,j as D,al as de,w as P,h as t,e as n,b as l,c as u,k as R,F as T,m as z,t as h,am as pe,n as I,i as fe,a4 as me,a5 as ge,a as r}from"./index-BuIkzTbX.js";import{A as ve}from"./Api-D_vvPt4a.js";import{C as _e}from"./CatalogProductCategory-BS1myWOu.js";import{_ as K,a as ye}from"./DataNotFound.vue_vue_type_script_setup_true_lang-BmhRtrIo.js";import{A as he}from"./AppLoading-DSuPZYIK.js";import{_ as xe,s as we}from"./AppPaginator.vue_vue_type_script_setup_true_lang-UhejqkUD.js";import{u as ke}from"./app-toast-C5pjiAmH.js";import{u as Ce}from"./title-DTf3XjVI.js";import{u as be}from"./entity-BPHdmNvU.js";import{s as Pe}from"./index-lvVUb5mS.js";import{a as $e,s as je}from"./index-C9JuvMH3.js";import{s as qe}from"./index-CgPAqISb.js";class Ae extends ve{constructor(){super(...arguments);N(this,"resource","customer-portal/products")}}const Se=new Ae,Ve=Y("product-catalog",()=>{const{entities:i,selected:s,meta:c,links:x,loading:w,refetch:$,notFound:j}=be(),{storagePrefix:q}=ee(),A=Z(`${q}product_catalog_layout_mode`,"grid");return{products:i,selected:s,meta:c,links:x,loading:w,refetch:$,notFound:j,layout:A}}),Ee={class:"flex w-full flex-col gap-4 md:flex-row md:items-center md:justify-between"},Be={class:"text-lg font-bold"},De={class:"flex w-full flex-col gap-2 md:w-auto md:flex-row md:items-center md:gap-4"},Re={class:"flex items-center gap-2"},Te={class:"divide-surface-200 border-y-surface-200 flex flex-col divide-y border-y border-t"},Fe={key:0,class:"grid grid-cols-1 gap-4 py-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5"},Le=["onClick"],Ue=["src","alt"],Me={class:"mt-4 flex-1"},Ne={class:"font-bold"},Oe={class:"text-sm text-gray-600"},ze={key:1,class:"divide-surface-200 border-y-surface-200 flex flex-col divide-y"},Ie=["onClick"],Ke=["src","alt"],Ge={class:"flex flex-1 flex-col gap-4"},He={class:"text-lg font-bold"},Je={class:"text-sm text-gray-600"},Qe={class:"flex justify-end sm:items-end"},We=te({__name:"ProductCatalogPage",setup(i){const{t:s}=se();Ce(s("product_catalog"));const c=re(),x=fe(),{toastError:w}=ke(),$=ae(),j=oe(),q=Ve(),{user:A}=O(j),{products:d,selected:G,meta:k,links:F,refetch:L,loading:p,notFound:S,layout:f}=O(q),m=B([]),V=B(null),g=B(null),C=le(()=>c.query);ce(L,o=>{o&&E(C.value)}),ie(()=>{g.value=C.value.search,E(C.value),U(C.value)}),ne(()=>{d.value=[],k.value=null,F.value=null}),ue(o=>{const a=o.query;g.value=a.search,E(a),U(a)});const E=async o=>{var a;L.value=!1,S.value=!1,p.value=!0;try{const e=await Se.paginate({...o,customer:(a=A.value.customer)==null?void 0:a.id});d.value=e.data,k.value=e.meta,F.value=e.links,d.value.length<1&&(S.value=!0)}catch(e){w(e.message)}finally{p.value=!1}},U=async o=>{p.value=!0;try{const a=await _e.get();m.value=a,m.value.unshift({name:s("all_data",{data:s("category")}),id:0}),V.value=m.value.find(e=>e.id.toString()===o.category)??m.value[0]}catch(a){w(a.message)}finally{p.value=!1}},H=()=>{x.push({query:{...c.query,page:void 0,search:g.value}})},J=o=>{x.push({query:{...c.query,page:void 0,category:o.id===0?void 0:o.id}})},M=o=>{G.value=o,$.open(me(()=>ge(()=>import("./CatalogProductDetailsDialog-Ddu_XRzM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]))),{props:{header:s("details_data",{data:s("product")}),modal:!0}})};return(o,a)=>(r(),D(t(Pe),{"pt:root:class":"flex! flex-col h-full justify-between","pt:content-container:class":"flex! flex-col flex-1","pt:content:class":"flex-1"},de({header:P(()=>[l("div",Ee,[l("div",Be,h(t(s)("product_catalog")),1),l("div",De,[n(t(we),{modelValue:V.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>V.value=e),J],options:m.value,"option-label":"name",placeholder:t(s)("choose_data",{data:t(s)("category")}),class:"w-full md:w-auto"},null,8,["modelValue","options","placeholder"]),n(t(je),{class:"w-full"},{default:P(()=>[n(t($e),{class:"pi pi-search"}),n(t(qe),{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value=e),type:"search",placeholder:t(s)("search_data",{data:t(s)("product")}),class:"w-full",onKeyup:pe(H,["enter"])},null,8,["modelValue","placeholder"])]),_:1}),l("div",Re,[n(t(I),{icon:"pi pi-bars",outlined:"",severity:t(f)==="list"?"primary":"secondary",onClick:a[2]||(a[2]=e=>f.value="list")},null,8,["severity"]),n(t(I),{icon:"pi pi-th-large",outlined:"",severity:t(f)==="grid"?"primary":"secondary",onClick:a[3]||(a[3]=e=>f.value="grid")},null,8,["severity"])])])])]),default:P(()=>[l("div",Te,[t(d).length?(r(),u(T,{key:0},[t(f)==="grid"?(r(),u("div",Fe,[(r(!0),u(T,null,z(t(d),(e,b)=>{var v,_,y;return r(),u("div",{key:b,class:"flex cursor-pointer flex-col justify-between rounded-xl border border-gray-200 p-4 shadow-sm",onClick:Q=>M(e)},[(_=(v=e.images)==null?void 0:v[0])!=null&&_.url?(r(),u("img",{key:0,src:e.images[0].url,alt:e.name,class:"aspect-square object-cover"},null,8,Ue)):R("",!0),l("div",Me,[l("div",Ne,h(e.name),1),l("div",Oe,h((y=e.catalog_product_category)==null?void 0:y.name),1)]),n(K,{item:e,"cart-type":"inquiry",class:"mt-4"},null,8,["item"])],8,Le)}),128))])):(r(),u("div",ze,[(r(!0),u(T,null,z(t(d),(e,b)=>{var v,_,y;return r(),u("div",{key:b,class:"hover:bg-surface-100 flex w-full cursor-pointer flex-col gap-4 p-4 sm:flex-row",onClick:Q=>M(e)},[(_=(v=e.images)==null?void 0:v[0])!=null&&_.url?(r(),u("img",{key:0,src:e.images[0].url,alt:e.name,class:"aspect-square h-full w-full max-w-[100px] rounded object-cover"},null,8,Ke)):R("",!0),l("div",Ge,[l("div",null,[l("div",He,h(e.name),1),l("div",Je,h((y=e.catalog_product_category)==null?void 0:y.name),1)])]),l("div",Qe,[n(K,{item:e,"cart-type":"inquiry"},null,8,["item"])])],8,Ie)}),128))]))],64)):t(p)?(r(),D(he,{key:1})):t(S)?(r(),D(ye,{key:2})):R("",!0)])]),_:2},[t(k)?{name:"footer",fn:P(()=>[n(xe,{meta:t(k)},null,8,["meta"])]),key:"0"}:void 0]),1024))}}),ut=Object.freeze(Object.defineProperty({__proto__:null,default:We},Symbol.toStringTag,{value:"Module"}));export{Se as C,ut as P,Ve as u};
