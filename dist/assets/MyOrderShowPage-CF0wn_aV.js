import{d as O,f as q,s as E,B as L,C as R,z as T,x as V,aq as Y,c as l,e as m,al as z,w as _,h as e,b as t,n as A,r as F,p as I,t as s,j as P,k as x,F as b,m as w,l as k,a as o}from"./index-pIQTk0BI.js";import{u as $,M as U,_ as G}from"./my-order-CTujILY6.js";import{A as H}from"./AppLoading-DhL2odpr.js";import{u as J}from"./app-toast-7cVLS-7z.js";import{u as K}from"./date-C880vZW4.js";import{u as Q}from"./number-DM6olJge.js";import{u as W}from"./title-CDEYmsUA.js";import{s as X}from"./index-C7gjogKq.js";import"./Api-BTyaGELh.js";import"./entity-BhAlVAIO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"mx-auto max-w-5xl"},tt={class:"flex w-full flex-col items-start justify-between gap-4 md:flex-row md:items-center"},et={class:"divide-surface-400 flex flex-col items-start justify-end gap-1 md:flex-row md:items-center md:gap-2 md:divide-x"},st={class:"truncate pr-2 text-sm font-semibold text-gray-800"},at={class:"truncate text-sm text-gray-500"},rt={class:"flex flex-col-reverse gap-4 sm:flex-row sm:items-center sm:justify-between"},ot={class:"text-sm text-gray-600"},lt={class:"font-medium text-gray-800"},nt={class:"flex flex-wrap items-center gap-2"},dt={class:"text-sm text-gray-700"},ct={class:"text-sm font-medium text-gray-900"},it={class:"mt-4 grid grid-cols-1"},ut={class:"space-y-3"},mt={class:"flex-1"},_t={class:"text-sm font-medium text-gray-900"},ft={class:"text-xs text-gray-500"},xt={key:0},pt={key:0,class:"text-sm whitespace-nowrap text-gray-800"},yt={class:"mt-4 flex h-full w-full flex-col justify-end justify-self-end"},ht={key:0,class:"mb-4 text-left sm:text-right"},gt={class:"text-xs text-gray-500"},vt={class:"text-sm font-bold text-yellow-700"},bt={key:1,class:"w-full text-sm text-gray-800"},wt={class:"text-surface-600 py-2 text-left tracking-wide"},kt={class:"py-2 text-right"},jt={class:"text-surface-600 py-2 text-left tracking-wide"},Mt={class:"py-2 text-right"},Ct={class:"text-surface-600 py-2 text-left tracking-wide"},Nt={class:"py-2 text-right"},Bt={class:"border-t border-gray-300 font-bold"},Dt={class:"py-2 text-left tracking-wide"},St={class:"py-2 text-right"},Ot={class:"text-yellow-700"},$t=O({__name:"MyOrderShowPage",setup(qt){const{t:a}=q(),j=W(a("details_data",{data:a("order")})),M=R(),{toastError:C}=J(),{formatDate:N}=K(),{formatNumber:n}=Q(),B=$(),{selected:d,loading:f,refetch:p}=E(B),D=L(()=>Number(M.params.id));T(p,c=>{c&&y()}),V(()=>{y()}),Y(()=>{d.value=null});const y=async()=>{p.value=!1,f.value=!0;try{const c=await U.show(D.value);d.value=c,j.value=a("details_data",{data:a("order_data",{data:c.number})})}catch(c){C(c.message)}finally{f.value=!1}};return(c,u)=>{const S=F("RouterLink");return o(),l("div",Z,[m(e(X),{"pt:root:class":"flex flex-col h-full justify-between","pt:content-container:class":"flex flex-col flex-1","pt:content:class":"flex-1"},z({default:_(()=>[e(d)?(o(!0),l(b,{key:0},w(e(d).sales_orders,r=>{var h;return o(),l("div",{key:r.id,class:"border-surface-200 bg-surface-50 rounded border px-3 py-4"},[t("div",rt,[t("div",ot,[k(s(e(a)("brand"))+": ",1),t("span",lt,s((h=r.brand)==null?void 0:h.name),1)]),t("div",nt,[t("span",dt,s(e(N)(new Date(r.date),"DD MMM YYYY")),1),m(G,{value:r.state},null,8,["value"]),t("span",ct,s(r.number),1)])]),t("div",it,[t("div",ut,[(o(!0),l(b,null,w(r.items,i=>{var g,v;return o(),l("div",{key:i.id,class:"flex items-start gap-3"},[u[1]||(u[1]=t("div",{class:"bg-surface-200 flex aspect-square w-[50px] items-center justify-center overflow-hidden rounded"},[t("i",{class:"pi pi-image text-4xl"})],-1)),t("div",mt,[t("div",_t,s((g=i.product)==null?void 0:g.name)+" - "+s((v=i.variant)==null?void 0:v.name),1),t("div",ft,[k(s(e(n)(i.quantity))+" PCS ",1),r.state!=="unconfirmed"?(o(),l("span",xt," Ã— "+s(e(n)(i.price,!0)),1)):x("",!0)])]),r.state!=="unconfirmed"?(o(),l("div",pt,s(e(n)(i.quantity*i.price,!0)),1)):x("",!0)])}),128))]),t("div",yt,[r.state==="unconfirmed"?(o(),l("div",ht,[t("div",gt,s(e(a)("total_data",{data:e(a)("order")})),1),t("div",vt,s(e(a)("under_negotiation")),1)])):(o(),l("table",bt,[t("tbody",null,[t("tr",null,[t("td",wt,s(e(a)("subtotal")),1),t("td",kt,s(e(n)(r.subtotal,!0)),1)]),t("tr",null,[t("td",jt,s(e(a)("tax_base")),1),t("td",Mt,s(e(n)(r.tax_base,!0)),1)]),t("tr",null,[t("td",Ct,s(e(a)("tax")),1),t("td",Nt,s(e(n)(r.tax,!0)),1)]),t("tr",Bt,[t("td",Dt,s(e(a)("total_data",{data:e(a)("order")})),1),t("td",St,[t("span",Ot,s(e(n)(r.total,!0)),1)])])])]))])])])}),128)):e(f)?(o(),P(H,{key:1})):x("",!0)]),_:2},[e(d)?{name:"header",fn:_(()=>[t("div",tt,[m(e(A),{size:"small",outlined:"","as-child":""},{default:_(r=>[m(S,{to:{name:"my-orders"},class:I(r.class)},{default:_(()=>[u[0]||(u[0]=t("span",{class:"pi pi-arrow-circle-left"},null,-1)),t("span",null,s(e(a)("back")),1)]),_:2,__:[0]},1032,["class"])]),_:1}),t("div",et,[t("div",st,s(e(a)("number_data",{data:e(a)("order")}))+". "+s(e(d).number),1),t("div",at,s(e(d).external_number||"-"),1)])])]),key:"0"}:void 0]),1024)])}}});export{$t as default};
