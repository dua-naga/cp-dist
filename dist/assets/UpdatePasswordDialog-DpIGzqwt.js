import{h as U,z as m,a as _,s as A}from"./external-CP6u4agW.js";import{d as B,f as E,g as h,j as c,w as t,b as l,e,k as w,h as s,t as d,l as v,n as N,aN as P,a as u}from"./index-CvL64b5B.js";import{A as R}from"./Auth-BHmiE1TG.js";import{u as T}from"./app-toast-C0ygo0ES.js";import{s as g}from"./index-lXBcmZ2h.js";import{s as y}from"./index-DAbN7U77.js";import"./Api-0keYiYT7.js";import"./index-zX5Bf_T0.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DEdilzub.js";import"./index-Dg0_AxQJ.js";const F={class:"mt-2 flex flex-col gap-1"},I={for:"old_password"},q={class:"flex flex-col gap-1"},G={for:"password"},H={class:"flex flex-col gap-1"},J={for:"password_confirmation"},K={class:"mt-4 flex justify-end gap-2"},os=B({__name:"UpdatePasswordDialog",setup(L){const j=P("dialogRef"),{t:i}=E(),{toastSuccess:z,toastError:C}=T(),a=h({old_password:"",password:"",password_confirmation:""}),f=h(!1),D=U(m.object({old_password:m.string(),password:m.string().min(8),password_confirmation:m.string()}).refine(n=>n.password===n.password_confirmation,{message:i("password_must_match"),path:["password_confirmation"]})),b=()=>{j.value.close()},S=async n=>{if(n.valid){f.value=!0;try{const{message:o}=await R.updatePassword({old_password:a.value.old_password,password:a.value.password,password_confirmation:a.value.password_confirmation});z(o),b()}catch(o){C(o.message)}finally{f.value=!1}}};return(n,o)=>(u(),c(s(A),{"initial-values":a.value,resolver:s(D),class:"flex flex-col gap-4 md:w-[400px]",onSubmit:S},{default:t(r=>{var x,k,V;return[l("div",F,[e(s(_),{variant:"on"},{default:t(()=>[e(s(g),{id:"old_password",modelValue:a.value.old_password,"onUpdate:modelValue":o[0]||(o[0]=p=>a.value.old_password=p),type:"text",name:"old_password",feedback:!1,"toggle-mask":"",fluid:""},null,8,["modelValue"]),l("label",I,d(s(i)("old_password")),1)]),_:1}),(x=r.old_password)!=null&&x.invalid?(u(),c(s(y),{key:0,severity:"error",size:"small",variant:"simple"},{default:t(()=>[v(d(r.old_password.error.message),1)]),_:2},1024)):w("",!0)]),l("div",q,[e(s(_),{variant:"on"},{default:t(()=>[e(s(g),{id:"password",modelValue:a.value.password,"onUpdate:modelValue":o[1]||(o[1]=p=>a.value.password=p),type:"text",name:"password",feedback:!1,"toggle-mask":"",fluid:""},null,8,["modelValue"]),l("label",G,d(s(i)("password")),1)]),_:1}),(k=r.password)!=null&&k.invalid?(u(),c(s(y),{key:0,severity:"error",size:"small",variant:"simple"},{default:t(()=>[v(d(r.password.error.message),1)]),_:2},1024)):w("",!0)]),l("div",H,[e(s(_),{variant:"on"},{default:t(()=>[e(s(g),{id:"password_confirmation",modelValue:a.value.password_confirmation,"onUpdate:modelValue":o[2]||(o[2]=p=>a.value.password_confirmation=p),type:"text",name:"password_confirmation",feedback:!1,"toggle-mask":"",fluid:""},null,8,["modelValue"]),l("label",J,d(s(i)("confirm_password")),1)]),_:1}),(V=r.password_confirmation)!=null&&V.invalid?(u(),c(s(y),{key:0,severity:"error",size:"small",variant:"simple"},{default:t(()=>[v(d(r.password_confirmation.error.message),1)]),_:2},1024)):w("",!0)]),l("div",K,[e(s(N),{type:"button",label:s(i)("cancel"),severity:"secondary",onClick:b},null,8,["label"]),e(s(N),{type:"submit",label:s(i)("save"),loading:f.value},null,8,["label","loading"])])]}),_:1},8,["initial-values","resolver"]))}});export{os as default};
