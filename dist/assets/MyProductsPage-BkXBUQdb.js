var O=Object.defineProperty;var Q=(l,a,n)=>a in l?O(l,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[a]=n;var C=(l,a,n)=>Q(l,typeof a!="symbol"?a+"":a,n);import{ah as W,ai as X,A as Y,d as Z,f as ee,u as se,s as D,g as F,B as te,C as ae,z as oe,x as re,aj as le,ak as ne,j as R,al as ie,w as j,h as t,e as c,b as o,c as f,k as ce,F as U,m as K,t as u,am as de,n as z,i as ue,a as i}from"./index-Bx4W_xK3.js";import{A as G}from"./Api-DXpP5ham.js";import{_ as I,a as fe}from"./DataNotFound.vue_vue_type_script_setup_true_lang-D4ogHQct.js";import{A as pe}from"./AppLoading-CvcxhyWa.js";import{_ as me,s as ve}from"./AppPaginator.vue_vue_type_script_setup_true_lang-B0kvS-3d.js";import{u as ye}from"./app-toast-DJ0iMKCx.js";import{u as xe}from"./title-BSStnSF8.js";import{u as ge}from"./entity-CF3BxAvb.js";import{s as _e}from"./index-BC2AJbO3.js";import{a as he,s as we}from"./index-D9BhMZPq.js";import{s as be}from"./index-ZMCdNXxJ.js";import"./cart-CSjYbghQ.js";import"./index-DLfLfmVv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Dj-02ixo.js";import"./index-BhYt9Q08.js";import"./index-B9AbhMQn.js";import"./index-LiBe83ku.js";import"./index-O-dTXy2X.js";class ke extends G{constructor(){super(...arguments);C(this,"resource","my-brands")}}const $e=new ke;class Be extends G{constructor(){super(...arguments);C(this,"resource","my-products")}}const Ve=new Be,je=W("variant",()=>{const{entities:l,selected:a,meta:n,links:k,loading:$,refetch:q,notFound:A}=ge(),{storagePrefix:M}=Y(),d=X(`${M}my_products_layout_mode`,"list");return{variants:l,selected:a,meta:n,links:k,loading:$,refetch:q,notFound:A,layout:d}}),qe={class:"flex w-full flex-col gap-4 md:flex-row md:items-center md:justify-between"},Ae={class:"text-lg font-bold"},Me={class:"flex w-full flex-col gap-2 md:w-auto md:flex-row md:items-center md:gap-4"},Pe={class:"flex items-center gap-2"},Se={class:"divide-surface-200 border-y-surface-200 flex flex-col divide-y border-y border-t"},Ee={key:0,class:"grid grid-cols-1 gap-4 py-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5"},Ce={class:"mt-4 flex-1"},Fe={class:"text-xs font-semibold tracking-wide text-gray-500 uppercase"},Re={class:"font-bold"},Ue={class:"text-sm text-gray-600"},Le={key:1,class:"divide-surface-200 border-y-surface-200 flex flex-col divide-y"},Ne={class:"flex flex-1 flex-col gap-4"},Te={class:"text-xs font-semibold tracking-wide text-gray-500 uppercase"},De={class:"text-lg font-bold"},Ke={class:"text-sm text-gray-600"},ze={class:"flex justify-end sm:items-end"},ds=Z({__name:"MyProductsPage",setup(l){const{t:a}=ee();xe(a("my_products"));const n=ae(),k=ue(),{toastError:$}=ye(),q=se(),A=je(),{user:M}=D(q),{variants:d,meta:B,links:L,refetch:N,loading:m,notFound:P,layout:v}=D(A),y=F([]),S=F(null),x=F(null),V=te(()=>n.query);oe(N,r=>{r&&E(V.value)}),re(()=>{x.value=V.value.search,E(V.value),T(V.value)}),le(()=>{d.value=[],B.value=null,L.value=null}),ne(r=>{const e=r.query;x.value=e.search,E(e),T(e)});const E=async r=>{N.value=!1,P.value=!1,m.value=!0;try{const e=await Ve.paginate({...r});d.value=e.data,B.value=e.meta,L.value=e.links,d.value.length<1&&(P.value=!0)}catch(e){$(e.message)}finally{m.value=!1}},T=async r=>{var e;m.value=!0;try{const s=await $e.get({customer:((e=M.value.customer)==null?void 0:e.id)??"88"});y.value=s,y.value.unshift({name:a("all_data",{data:a("brand")}),id:0}),S.value=y.value.find(p=>p.id.toString()===r.brand)??y.value[0]}catch(s){$(s.message)}finally{m.value=!1}},H=()=>{k.push({query:{...n.query,page:void 0,search:x.value}})},J=r=>{k.push({query:{...n.query,page:void 0,brand:r.id===0?void 0:r.id}})};return(r,e)=>(i(),R(t(_e),{"pt:root:class":"flex! flex-col h-full justify-between","pt:content-container:class":"flex! flex-col flex-1","pt:content:class":"flex-1"},ie({header:j(()=>[o("div",qe,[o("div",Ae,u(t(a)("my_products")),1),o("div",Me,[c(t(ve),{modelValue:S.value,"onUpdate:modelValue":[e[0]||(e[0]=s=>S.value=s),J],options:y.value,"option-label":"name",placeholder:t(a)("choose_data",{data:t(a)("brand")}),class:"w-full md:w-auto"},null,8,["modelValue","options","placeholder"]),c(t(we),{class:"w-full"},{default:j(()=>[c(t(he),{class:"pi pi-search"}),c(t(be),{modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=s=>x.value=s),type:"search",placeholder:t(a)("search_data",{data:t(a)("product")}),class:"w-full",onKeyup:de(H,["enter"])},null,8,["modelValue","placeholder"])]),_:1}),o("div",Pe,[c(t(z),{icon:"pi pi-bars",outlined:"",severity:t(v)==="list"?"primary":"secondary",onClick:e[2]||(e[2]=s=>v.value="list")},null,8,["severity"]),c(t(z),{icon:"pi pi-th-large",outlined:"",severity:t(v)==="grid"?"primary":"secondary",onClick:e[3]||(e[3]=s=>v.value="grid")},null,8,["severity"])])])])]),default:j(()=>[o("div",Se,[t(d).length?(i(),f(U,{key:0},[t(v)==="grid"?(i(),f("div",Ee,[(i(!0),f(U,null,K(t(d),(s,p)=>{var g,_,h,w,b;return i(),f("div",{key:p,class:"flex flex-col justify-between rounded-xl border border-gray-200 p-4 shadow-sm"},[e[4]||(e[4]=o("div",{class:"bg-surface-200 flex aspect-square w-full items-center justify-center rounded text-gray-400"},[o("i",{class:"pi pi-image text-4xl"})],-1)),o("div",Ce,[o("div",Fe,u((_=(g=s.product)==null?void 0:g.brand)==null?void 0:_.name),1),o("div",Re,u((h=s.product)==null?void 0:h.name)+" - "+u(s.name),1),o("div",Ue,u((b=(w=s.product)==null?void 0:w.product_category)==null?void 0:b.name),1)]),c(I,{item:s,class:"mt-4"},null,8,["item"])])}),128))])):(i(),f("div",Le,[(i(!0),f(U,null,K(t(d),(s,p)=>{var g,_,h,w,b;return i(),f("div",{key:p,class:"hover:bg-surface-100 flex w-full flex-col gap-4 p-4 sm:flex-row"},[e[5]||(e[5]=o("div",{class:"bg-surface-200 flex aspect-square w-full max-w-[100px] items-center justify-center overflow-hidden rounded"},[o("i",{class:"pi pi-image text-4xl"})],-1)),o("div",Ne,[o("div",Te,u((_=(g=s.product)==null?void 0:g.brand)==null?void 0:_.name),1),o("div",null,[o("div",De,u(`${(h=s.product)==null?void 0:h.name} - ${s.name}`),1),o("div",Ke,u((b=(w=s.product)==null?void 0:w.product_category)==null?void 0:b.name),1)])]),o("div",ze,[c(I,{item:s},null,8,["item"])])])}),128))]))],64)):t(m)?(i(),R(pe,{key:1})):t(P)?(i(),R(fe,{key:2})):ce("",!0)])]),_:2},[t(B)?{name:"footer",fn:j(()=>[c(me,{meta:t(B)},null,8,["meta"])]),key:"0"}:void 0]),1024))}});export{ds as default};
