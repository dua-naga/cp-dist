import{d as F,f as U,u as K,s as I,g as w,B as P,C as G,z as H,x as J,aq as Q,ak as W,c,e as u,al as X,w as m,h as e,b as t,j as C,k as N,am as Z,F as R,m as q,l as x,t as o,n as ee,r as te,p as se,i as ae,a as r}from"./index-BuIkzTbX.js";import{u as oe,M as re,_ as le}from"./my-order-Dzu_cVD-.js";import{A as ne}from"./AppLoading-DSuPZYIK.js";import{_ as ce}from"./AppPaginator.vue_vue_type_script_setup_true_lang-UhejqkUD.js";import{u as ie}from"./app-toast-C5pjiAmH.js";import{u as ue}from"./date-DlM9HC1X.js";import{u as de}from"./number-DM6olJge.js";import{u as me}from"./title-DTf3XjVI.js";import{s as fe}from"./index-lvVUb5mS.js";import{s as pe,a as _e}from"./index-C9JuvMH3.js";import{s as ve}from"./index-CgPAqISb.js";import{s as he}from"./index-CMhtJUBl.js";import"./Api-D_vvPt4a.js";import"./entity-BPHdmNvU.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-FvBsrFbw.js";import"./index-DscL36h5.js";import"./index-BLcXtIKv.js";import"./index-BHGLoDXq.js";import"./index-Ahr_tNbb.js";const xe={class:"mx-auto max-w-5xl"},ye={class:"text-lg font-bold"},ge={class:"flex-1 space-y-4"},be={class:"flex flex-col gap-2 md:flex-row md:items-center md:gap-4"},we={key:0,class:"divide-surface-200 flex flex-col gap-4"},ke={class:"mb-2 flex flex-col justify-between gap-1 md:flex-row md:items-center"},Me={class:"truncate text-sm font-semibold text-gray-800"},Se={class:"truncate text-sm text-gray-500"},Be={key:0,class:"space-y-3 pt-2"},De={class:"flex flex-col gap-3"},Ve={class:"flex flex-wrap items-center gap-2"},$e={class:"text-sm text-gray-700"},Ce={class:"text-sm font-medium text-gray-900"},Ne={class:"flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between"},Re={class:"text-sm text-gray-600"},qe={class:"font-medium text-gray-800"},Oe={class:"text-sm font-bold text-gray-800"},je={class:"text-left sm:text-right"},Ae={class:"text-xs text-gray-500"},Ee={key:0,class:"text-sm font-bold text-yellow-700"},Le={key:1,class:"text-sm font-bold text-gray-900"},Te={class:"pt-2 text-end"},nt=F({__name:"MyOrdersPage",setup(Ye){const{t:a}=U();me(a("my_orders"));const k=G(),O=ae(),{toastError:j}=ie(),{formatDate:A}=ue(),{formatNumber:E}=de(),L=K(),T=oe(),{orders:f,meta:_,links:M,loading:y,refetch:S,notFound:g}=I(T),Y=w(null),v=w([]),p=w(null),h=P(()=>k.query);H(S,i=>{i&&b(h.value)}),J(()=>{p.value=h.value.search,b(h.value),B(h.value)}),Q(()=>{f.value=[],_.value=null,M.value=null}),W(i=>{const s=i.query;p.value=s.search,b(s),B(s)});const b=async i=>{var s;S.value=!1,g.value=!1,y.value=!0;try{const d=await re.paginate({...i,per_page:5,customer:(s=L.user.customer)==null?void 0:s.id});f.value=d.data,_.value=d.meta,M.value=d.links,f.value.length<1&&(g.value=!0)}catch(d){j(d.message)}finally{y.value=!1}},B=i=>{v.value=["unconfirmed","confirmed"].map(s=>({label:a(s),value:s})),v.value.unshift({label:a("all_data",{data:a("status")}),value:""}),Y.value=v.value.find(s=>s.value===i.state)??v.value[0]},z=()=>{O.push({query:{...k.query,page:void 0,search:p.value}})};return(i,s)=>{const d=te("RouterLink");return r(),c("div",xe,[u(e(fe),{"pt:root:class":"flex flex-col h-full justify-between","pt:content-container:class":"flex flex-col flex-1","pt:content:class":"flex-1"},X({header:m(()=>[t("div",ye,o(e(a)("my_orders")),1)]),default:m(()=>[t("div",ge,[t("div",be,[u(e(pe),{class:"w-full"},{default:m(()=>[u(e(_e),{class:"pi pi-search"}),u(e(ve),{modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=n=>p.value=n),type:"search",placeholder:e(a)("search_data",{data:e(a)("order")}),class:"w-full",onKeyup:Z(z,["enter"])},null,8,["modelValue","placeholder"])]),_:1})]),e(f).length?(r(),c("div",we,[(r(!0),c(R,null,q(e(f),n=>{var D;return r(),c("div",{key:n.id,class:"border-surface-200 rounded-lg border bg-white p-4 shadow-sm transition hover:shadow"},[t("div",ke,[t("div",Me,[s[1]||(s[1]=t("span",{class:"pi pi-hashtag"},null,-1)),x(" "+o(n.number),1)]),t("div",Se,o(n.external_number||"-"),1)]),(D=n.sales_orders)!=null&&D.length?(r(),c("div",Be,[(r(!0),c(R,null,q(n.sales_orders,l=>{var V,$;return r(),c("div",{key:l.id,class:"border-surface-200 bg-surface-50 rounded border px-3 py-2"},[t("div",De,[t("div",Ve,[t("span",$e,o(e(A)(new Date(l.date),"DD MMM YYYY")),1),u(le,{value:l.state},null,8,["value"]),t("span",Ce,o(l.number),1)]),t("div",Ne,[t("div",null,[t("div",Re,[x(o(e(a)("brand"))+": ",1),t("span",qe,o((V=l.brand)==null?void 0:V.name),1)]),t("div",Oe,o(($=l.items)==null?void 0:$.length)+" "+o(e(a)("product")),1)]),t("div",je,[t("div",Ae,o(e(a)("total_data",{data:e(a)("order")})),1),l.state==="unconfirmed"?(r(),c("div",Ee,o(e(a)("under_negotiation")),1)):(r(),c("div",Le,o(e(E)(l.total,!0)),1))])])])])}),128)),t("div",Te,[u(e(ee),{size:"small",text:"","as-child":""},{default:m(l=>[u(d,{to:{name:"my-orders.show",params:{id:n.id}},class:se(l.class)},{default:m(()=>[s[2]||(s[2]=t("span",{class:"pi pi-arrow-circle-right"},null,-1)),x(" "+o(e(a)("view_data",{data:e(a)("details")})),1)]),_:2,__:[2]},1032,["to","class"])]),_:2},1024)])])):N("",!0)])}),128))])):e(y)?(r(),C(ne,{key:1})):e(g)?(r(),C(e(he),{key:2,severity:"warn"},{default:m(()=>[x(o(e(a)("your_orders_are_empty")),1)]),_:1})):N("",!0)])]),_:2},[e(_)?{name:"footer",fn:m(()=>[u(ce,{meta:e(_)},null,8,["meta"])]),key:"0"}:void 0]),1024)])}}});export{nt as default};
