import{d as z,f as G,g as q,j as E,h as t,n as L,a as n,ab as O,ac as Q,ad as W,u as X,s as I,ae as Y,af as Z,ag as ee,p as te,ah as ae,ai as se,aj as re,w as A,e as c,b as s,c as y,k as oe,F as U,m as K,t as u,ak as le,i as ne}from"./index-b0lzFBaC.js";import{V as ie,B as ce,_ as de}from"./DataNotFound.vue_vue_type_script_setup_true_lang-DJwwiHAj.js";import{u as ue}from"./cart-D_PN03tw.js";import{u as pe,A as fe}from"./entity-IyVentU-.js";import{_ as me,s as ve}from"./AppPaginator.vue_vue_type_script_setup_true_lang-T2fAExNs.js";import{u as ye}from"./app-toast-ChWpJhNB.js";import{u as ge}from"./title-Du5kwmVT.js";import{s as xe}from"./index-9uHHy8YP.js";import{a as _e,s as he}from"./index-BcKMyCrX.js";import{s as be}from"./index-BkhCBi93.js";import"./Api-CGjF1U5X.js";import"./index-JUE7EH6C.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CPfdwapD.js";import"./index-C7XZdSxq.js";import"./index-DYQC1zk6.js";import"./index-DXTlLEbN.js";import"./index-_Jfx1kC4.js";const M=z({__name:"AddToCart",props:{cartType:{default:"product"},variant:{}},setup(C){const r=C,{t:p}=G(),g=ue(),i=q(!1),f=q(!1),x=async()=>{var d,o,m;i.value=!0,await new Promise(T=>setTimeout(T,250)),g.addItem({cartable_id:r.variant.id,cartable_type:r.cartType,cartable:r.variant,name:`${(o=(d=r.variant.product)==null?void 0:d.brand)==null?void 0:o.name} ${(m=r.variant.product)==null?void 0:m.name} - ${r.variant.name}`,price:0,qty:1e3}),i.value=!1,f.value=!0,setTimeout(()=>{f.value=!1},1500)};return(d,o)=>(n(),E(t(L),{type:"button",icon:f.value?"pi pi-check-circle":"pi pi-plus",size:"small",label:t(p)("cart"),class:"w-full sm:w-auto",loading:i.value,disabled:i.value,onClick:x},null,8,["icon","label","loading","disabled"]))}}),we=O("variant",()=>{const{entities:C,selected:r,meta:p,links:g,loading:i,refetch:f,notFound:x}=pe(),{storagePrefix:d}=W(),o=Q(`${d}my_products_layout_mode`,"list");return{variants:C,selected:r,meta:p,links:g,loading:i,refetch:f,notFound:x,layout:o}}),ke={class:"flex w-full flex-col gap-4 md:flex-row md:items-center md:justify-between"},$e={class:"text-lg font-bold"},Ve={class:"flex w-full flex-col gap-2 md:w-auto md:flex-row md:items-center md:gap-4"},Be={class:"flex items-center gap-2"},Se={class:"divide-surface-200 border-y-surface-200 flex flex-col divide-y border-y border-t"},qe={key:0,class:"grid grid-cols-1 gap-4 py-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5"},Ce={class:"mt-4 flex-1"},Te={class:"text-xs font-semibold tracking-wide text-gray-500 uppercase"},je={class:"font-bold"},Ae={class:"text-sm text-gray-600"},Ee={key:1,class:"divide-surface-200 border-y-surface-200 flex flex-col divide-y"},Fe={class:"flex flex-1 flex-col gap-4"},Pe={class:"text-xs font-semibold tracking-wide text-gray-500 uppercase"},Re={class:"text-lg font-bold"},Ue={class:"text-sm text-gray-600"},Le={class:"flex justify-end sm:items-end"},st=z({__name:"MyProductsPage",setup(C){const{t:r}=G();ge(r("my_products"));const p=Z(),g=ne(),{toastError:i}=ye(),f=X(),x=we(),{user:d}=I(f),{variants:o,meta:m,links:T,refetch:N,loading:_,notFound:F,layout:h}=I(x),b=q([]),P=q(null),w=q(null),j=Y(()=>p.query);ee(N,l=>{l&&R(j.value)}),te(()=>{w.value=j.value.search,R(j.value),D(j.value)}),ae(()=>{o.value=[],m.value=null,T.value=null}),se(l=>{const a=l.query;w.value=a.search,R(a),D(a)});const R=async l=>{var a;N.value=!1,F.value=!1,_.value=!0;try{const e=await ie.paginate({...l,customer:(a=d.value.customer)==null?void 0:a.id});o.value=e.data,m.value=e.meta,T.value=e.links,o.value.length<1&&(F.value=!0)}catch(e){i(e.message)}finally{_.value=!1}},D=async l=>{var a;_.value=!0;try{const e=await ce.get({customer:((a=d.value.customer)==null?void 0:a.id)??"88"});b.value=e,b.value.unshift({name:r("all_data",{data:r("brand")}),id:0}),P.value=b.value.find(v=>v.id.toString()===l.brand)??b.value[0]}catch(e){i(e.message)}finally{_.value=!1}},H=()=>{g.push({query:{...p.query,page:void 0,search:w.value}})},J=l=>{g.push({query:{...p.query,page:void 0,brand:l.id===0?void 0:l.id}})};return(l,a)=>(n(),E(t(xe),{"pt:root:class":"flex! flex-col h-full justify-between","pt:content-container:class":"flex! flex-col flex-1","pt:content:class":"flex-1"},re({header:A(()=>[s("div",ke,[s("div",$e,u(t(r)("my_products")),1),s("div",Ve,[c(t(ve),{modelValue:P.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>P.value=e),J],options:b.value,"option-label":"name",placeholder:t(r)("choose_data",{data:t(r)("brand")}),class:"w-full md:w-auto"},null,8,["modelValue","options","placeholder"]),c(t(he),{class:"w-full"},{default:A(()=>[c(t(_e),{class:"pi pi-search"}),c(t(be),{modelValue:w.value,"onUpdate:modelValue":a[1]||(a[1]=e=>w.value=e),type:"search",placeholder:t(r)("search_data",{data:t(r)("product")}),class:"w-full",onKeyup:le(H,["enter"])},null,8,["modelValue","placeholder"])]),_:1}),s("div",Be,[c(t(L),{icon:"pi pi-bars",outlined:"",severity:t(h)==="list"?"primary":"secondary",onClick:a[2]||(a[2]=e=>h.value="list")},null,8,["severity"]),c(t(L),{icon:"pi pi-th-large",outlined:"",severity:t(h)==="grid"?"primary":"secondary",onClick:a[3]||(a[3]=e=>h.value="grid")},null,8,["severity"])])])])]),default:A(()=>[s("div",Se,[t(o).length?(n(),y(U,{key:0},[t(h)==="grid"?(n(),y("div",qe,[(n(!0),y(U,null,K(t(o),(e,v)=>{var k,$,V,B,S;return n(),y("div",{key:v,class:"flex flex-col justify-between rounded-xl border border-gray-200 p-4 shadow-sm"},[a[4]||(a[4]=s("div",{class:"bg-surface-200 flex aspect-square w-full items-center justify-center rounded text-gray-400"},[s("i",{class:"pi pi-image text-4xl"})],-1)),s("div",Ce,[s("div",Te,u(($=(k=e.product)==null?void 0:k.brand)==null?void 0:$.name),1),s("div",je,u((V=e.product)==null?void 0:V.name)+" - "+u(e.name),1),s("div",Ae,u((S=(B=e.product)==null?void 0:B.product_category)==null?void 0:S.name),1)]),c(M,{variant:e,class:"mt-4"},null,8,["variant"])])}),128))])):(n(),y("div",Ee,[(n(!0),y(U,null,K(t(o),(e,v)=>{var k,$,V,B,S;return n(),y("div",{key:v,class:"hover:bg-surface-100 flex w-full flex-col gap-4 p-4 sm:flex-row"},[a[5]||(a[5]=s("div",{class:"bg-surface-200 flex aspect-square w-full max-w-[100px] items-center justify-center overflow-hidden rounded"},[s("i",{class:"pi pi-image text-4xl"})],-1)),s("div",Fe,[s("div",Pe,u(($=(k=e.product)==null?void 0:k.brand)==null?void 0:$.name),1),s("div",null,[s("div",Re,u(`${(V=e.product)==null?void 0:V.name} - ${e.name}`),1),s("div",Ue,u((S=(B=e.product)==null?void 0:B.product_category)==null?void 0:S.name),1)])]),s("div",Le,[c(M,{variant:e},null,8,["variant"])])])}),128))]))],64)):t(_)?(n(),E(fe,{key:1})):t(F)?(n(),E(de,{key:2})):oe("",!0)])]),_:2},[t(m)?{name:"footer",fn:A(()=>[c(me,{meta:t(m)},null,8,["meta"])]),key:"0"}:void 0]),1024))}});export{st as default};
