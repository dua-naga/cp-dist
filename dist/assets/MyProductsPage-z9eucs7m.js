var O=Object.defineProperty;var Q=(l,a,i)=>a in l?O(l,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[a]=i;var R=(l,a,i)=>Q(l,typeof a!="symbol"?a+"":a,i);import{ah as W,ai as X,A as Y,d as Z,f as ee,u as se,s as K,g as U,B as te,C as ae,z as oe,x as re,aj as le,ak as ie,j as L,al as ne,w as q,h as t,e as c,b as o,c as p,k as ce,F as N,m as M,t as u,am as de,n as z,i as ue,a as n}from"./index-BuIkzTbX.js";import{A as G}from"./Api-D_vvPt4a.js";import{_ as I,a as fe}from"./DataNotFound.vue_vue_type_script_setup_true_lang-BmhRtrIo.js";import{A as pe}from"./AppLoading-DSuPZYIK.js";import{_ as me,s as ve}from"./AppPaginator.vue_vue_type_script_setup_true_lang-UhejqkUD.js";import{u as ye}from"./app-toast-C5pjiAmH.js";import{u as xe}from"./title-DTf3XjVI.js";import{u as ge}from"./entity-BPHdmNvU.js";import{s as _e}from"./index-lvVUb5mS.js";import{a as he,s as we}from"./index-C9JuvMH3.js";import{s as be}from"./index-CgPAqISb.js";import"./cart-Cpwgim7R.js";import"./index-CMhtJUBl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-FvBsrFbw.js";import"./index-DscL36h5.js";import"./index-BLcXtIKv.js";import"./index-BHGLoDXq.js";import"./index-Ahr_tNbb.js";class ke extends G{constructor(){super(...arguments);R(this,"resource","brands")}}const $e=new ke;class Ve extends G{constructor(){super(...arguments);R(this,"resource","variants")}}const Be=new Ve,je=W("variant",()=>{const{entities:l,selected:a,meta:i,links:k,loading:$,refetch:A,notFound:S}=ge(),{storagePrefix:V}=Y(),d=X(`${V}my_products_layout_mode`,"list");return{variants:l,selected:a,meta:i,links:k,loading:$,refetch:A,notFound:S,layout:d}}),qe={class:"flex w-full flex-col gap-4 md:flex-row md:items-center md:justify-between"},Ae={class:"text-lg font-bold"},Se={class:"flex w-full flex-col gap-2 md:w-auto md:flex-row md:items-center md:gap-4"},Ee={class:"flex items-center gap-2"},Ce={class:"divide-surface-200 border-y-surface-200 flex flex-col divide-y border-y border-t"},Fe={key:0,class:"grid grid-cols-1 gap-4 py-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5"},Re={class:"mt-4 flex-1"},Ue={class:"text-xs font-semibold tracking-wide text-gray-500 uppercase"},Le={class:"font-bold"},Ne={class:"text-sm text-gray-600"},Pe={key:1,class:"divide-surface-200 border-y-surface-200 flex flex-col divide-y"},Te={class:"flex flex-1 flex-col gap-4"},De={class:"text-xs font-semibold tracking-wide text-gray-500 uppercase"},Ke={class:"text-lg font-bold"},Me={class:"text-sm text-gray-600"},ze={class:"flex justify-end sm:items-end"},ds=Z({__name:"MyProductsPage",setup(l){const{t:a}=ee();xe(a("my_products"));const i=ae(),k=ue(),{toastError:$}=ye(),A=se(),S=je(),{user:V}=K(A),{variants:d,meta:B,links:P,refetch:T,loading:m,notFound:E,layout:v}=K(S),y=U([]),C=U(null),x=U(null),j=te(()=>i.query);oe(T,r=>{r&&F(j.value)}),re(()=>{x.value=j.value.search,F(j.value),D(j.value)}),le(()=>{d.value=[],B.value=null,P.value=null}),ie(r=>{const s=r.query;x.value=s.search,F(s),D(s)});const F=async r=>{var s;T.value=!1,E.value=!1,m.value=!0;try{const e=await Be.paginate({...r,customer:(s=V.value.customer)==null?void 0:s.id});d.value=e.data,B.value=e.meta,P.value=e.links,d.value.length<1&&(E.value=!0)}catch(e){$(e.message)}finally{m.value=!1}},D=async r=>{var s;m.value=!0;try{const e=await $e.get({customer:((s=V.value.customer)==null?void 0:s.id)??"88"});y.value=e,y.value.unshift({name:a("all_data",{data:a("brand")}),id:0}),C.value=y.value.find(f=>f.id.toString()===r.brand)??y.value[0]}catch(e){$(e.message)}finally{m.value=!1}},H=()=>{k.push({query:{...i.query,page:void 0,search:x.value}})},J=r=>{k.push({query:{...i.query,page:void 0,brand:r.id===0?void 0:r.id}})};return(r,s)=>(n(),L(t(_e),{"pt:root:class":"flex! flex-col h-full justify-between","pt:content-container:class":"flex! flex-col flex-1","pt:content:class":"flex-1"},ne({header:q(()=>[o("div",qe,[o("div",Ae,u(t(a)("my_products")),1),o("div",Se,[c(t(ve),{modelValue:C.value,"onUpdate:modelValue":[s[0]||(s[0]=e=>C.value=e),J],options:y.value,"option-label":"name",placeholder:t(a)("choose_data",{data:t(a)("brand")}),class:"w-full md:w-auto"},null,8,["modelValue","options","placeholder"]),c(t(we),{class:"w-full"},{default:q(()=>[c(t(he),{class:"pi pi-search"}),c(t(be),{modelValue:x.value,"onUpdate:modelValue":s[1]||(s[1]=e=>x.value=e),type:"search",placeholder:t(a)("search_data",{data:t(a)("product")}),class:"w-full",onKeyup:de(H,["enter"])},null,8,["modelValue","placeholder"])]),_:1}),o("div",Ee,[c(t(z),{icon:"pi pi-bars",outlined:"",severity:t(v)==="list"?"primary":"secondary",onClick:s[2]||(s[2]=e=>v.value="list")},null,8,["severity"]),c(t(z),{icon:"pi pi-th-large",outlined:"",severity:t(v)==="grid"?"primary":"secondary",onClick:s[3]||(s[3]=e=>v.value="grid")},null,8,["severity"])])])])]),default:q(()=>[o("div",Ce,[t(d).length?(n(),p(N,{key:0},[t(v)==="grid"?(n(),p("div",Fe,[(n(!0),p(N,null,M(t(d),(e,f)=>{var g,_,h,w,b;return n(),p("div",{key:f,class:"flex flex-col justify-between rounded-xl border border-gray-200 p-4 shadow-sm"},[s[4]||(s[4]=o("div",{class:"bg-surface-200 flex aspect-square w-full items-center justify-center rounded text-gray-400"},[o("i",{class:"pi pi-image text-4xl"})],-1)),o("div",Re,[o("div",Ue,u((_=(g=e.product)==null?void 0:g.brand)==null?void 0:_.name),1),o("div",Le,u((h=e.product)==null?void 0:h.name)+" - "+u(e.name),1),o("div",Ne,u((b=(w=e.product)==null?void 0:w.product_category)==null?void 0:b.name),1)]),c(I,{item:e,class:"mt-4"},null,8,["item"])])}),128))])):(n(),p("div",Pe,[(n(!0),p(N,null,M(t(d),(e,f)=>{var g,_,h,w,b;return n(),p("div",{key:f,class:"hover:bg-surface-100 flex w-full flex-col gap-4 p-4 sm:flex-row"},[s[5]||(s[5]=o("div",{class:"bg-surface-200 flex aspect-square w-full max-w-[100px] items-center justify-center overflow-hidden rounded"},[o("i",{class:"pi pi-image text-4xl"})],-1)),o("div",Te,[o("div",De,u((_=(g=e.product)==null?void 0:g.brand)==null?void 0:_.name),1),o("div",null,[o("div",Ke,u(`${(h=e.product)==null?void 0:h.name} - ${e.name}`),1),o("div",Me,u((b=(w=e.product)==null?void 0:w.product_category)==null?void 0:b.name),1)])]),o("div",ze,[c(I,{item:e},null,8,["item"])])])}),128))]))],64)):t(m)?(n(),L(pe,{key:1})):t(E)?(n(),L(fe,{key:2})):ce("",!0)])]),_:2},[t(B)?{name:"footer",fn:q(()=>[c(me,{meta:t(B)},null,8,["meta"])]),key:"0"}:void 0]),1024))}});export{ds as default};
