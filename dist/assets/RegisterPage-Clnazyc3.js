import{d as Y,f as G,u as H,g as S,c as g,b as t,e as s,w as l,h as e,i as J,r as K,a as d,j as c,k as f,t as r,l as h,F as j,m as A,n as F,p as O}from"./index-pIQTk0BI.js";import{h as Q,z as _,s as W,a as x}from"./external-D7vtt8kG.js";import{A as I}from"./Auth-CX2bvBOl.js";import{_ as X}from"./AppLogo.vue_vue_type_script_setup_true_lang-Bn9zQZ_5.js";import{u as Z}from"./title-CDEYmsUA.js";import{u as $}from"./cart-Bc5OcCqb.js";import{s as v}from"./index-D859Sy4x.js";import{s as w,a as b}from"./index-D7ACm3eW.js";import{s as C}from"./index-EwQvqdVe.js";import{s as M}from"./index-BCADEcUR.js";import"./Api-BTyaGELh.js";import"./index-BOePk00K.js";const ee={class:"min-h-dvh overflow-y-auto bg-white p-8 md:p-12 lg:p-24"},se={class:"flex h-full flex-col items-center justify-between gap-16"},ae={class:"space-y-2"},te={class:"text-center text-2xl font-bold"},le={class:"flex flex-col gap-1"},oe={for:"name"},ie={class:"flex flex-col gap-1"},re={for:"phone_number"},ne={class:"flex flex-col gap-1"},ue={for:"email"},de={class:"flex flex-col gap-1"},me={for:"password"},pe={class:"my-0 flex list-disc flex-col gap-1 px-4"},ce={class:"flex flex-col gap-1"},fe={for:"password_confirmation"},_e={class:"my-0 flex list-disc flex-col gap-1 px-4"},ve={class:"text-center"},Ee=Y({__name:"RegisterPage",setup(ge){const{t:n}=G();Z(n("register"));const P=J(),U=H(),T=$(),u=S({name:void 0,phone_number:void 0,email:void 0,password:void 0,password_confirmation:void 0}),V=S(!1),y=S(null),q=Q(_.object({name:_.string(),phone_number:_.string(),email:_.string().email(),password:_.string().min(3,{message:"Minimum 8 characters."}).refine(m=>/[a-z]/.test(m),{message:"Must have a lowercase letter."}),password_confirmation:_.string()}).refine(m=>m.password===m.password_confirmation,{message:n("password_must_match"),path:["password_confirmation"]})),D=async m=>{var a;if(m.valid){V.value=!0;try{const p=await I.register(u.value);if(!((a=p.user.roles)!=null&&a.map(k=>k.name).includes("customer")))throw new Error(n("invalid_credentials"));U.authenticate({token:p.token,user:p.user});const i=await I.me({includes:"customer"});U.user=i,T.setUserId(i.id.toString()),P.push({name:"auth.redirect"})}catch(p){const i=p;y.value=i.message}finally{V.value=!1}}};return(m,a)=>{const p=K("RouterLink");return d(),g("div",ee,[t("div",se,[s(X),s(e(W),{"initial-values":u.value,resolver:e(q),class:"mx-auto flex w-full max-w-md flex-col gap-4",onSubmit:D},{default:l(i=>{var k,B,E,L,N,R;return[t("div",ae,[t("div",te,r(e(n)("register")),1),a[6]||(a[6]=t("div",{class:"text-center text-sm text-slate-600"},"Please enter Your details",-1))]),(k=y.value)!=null&&k.length?(d(),c(e(v),{key:0,severity:"error",icon:"pi pi-times-circle",closable:"",onClose:a[0]||(a[0]=o=>y.value=null)},{default:l(()=>[h(r(y.value),1)]),_:1})):f("",!0),t("div",le,[s(e(x),{variant:"in"},{default:l(()=>[s(e(w),null,{default:l(()=>[s(e(b),{class:"pi pi-user"}),s(e(C),{id:"name",modelValue:u.value.name,"onUpdate:modelValue":a[1]||(a[1]=o=>u.value.name=o),name:"name",fluid:""},null,8,["modelValue"])]),_:1}),t("label",oe,r(e(n)("name")),1)]),_:1}),(B=i.name)!=null&&B.invalid?(d(),c(e(v),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[h(r(i.name.error.message),1)]),_:2},1024)):f("",!0)]),t("div",ie,[s(e(x),{variant:"in"},{default:l(()=>[s(e(w),null,{default:l(()=>[s(e(b),{class:"pi pi-phone"}),s(e(C),{id:"phone_number",modelValue:u.value.phone_number,"onUpdate:modelValue":a[2]||(a[2]=o=>u.value.phone_number=o),name:"phone_number",fluid:""},null,8,["modelValue"])]),_:1}),t("label",re,r(e(n)("phone_number")),1)]),_:1}),(E=i.phone_number)!=null&&E.invalid?(d(),c(e(v),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[h(r(i.phone_number.error.message),1)]),_:2},1024)):f("",!0)]),t("div",ne,[s(e(x),{variant:"in"},{default:l(()=>[s(e(w),null,{default:l(()=>[s(e(b),{class:"pi pi-at"}),s(e(C),{id:"email",modelValue:u.value.email,"onUpdate:modelValue":a[3]||(a[3]=o=>u.value.email=o),name:"email",fluid:""},null,8,["modelValue"])]),_:1}),t("label",ue,r(e(n)("email")),1)]),_:1}),(L=i.email)!=null&&L.invalid?(d(),c(e(v),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[h(r(i.email.error.message),1)]),_:2},1024)):f("",!0)]),t("div",de,[s(e(x),{variant:"in"},{default:l(()=>[s(e(w),null,{default:l(()=>[s(e(b),{class:"pi pi-unlock"}),s(e(M),{id:"password",modelValue:u.value.password,"onUpdate:modelValue":a[4]||(a[4]=o=>u.value.password=o),type:"text",name:"password",feedback:!1,"toggle-mask":"",fluid:""},null,8,["modelValue"])]),_:1}),t("label",me,r(e(n)("password")),1)]),_:1}),(N=i.password)!=null&&N.invalid?(d(),c(e(v),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[t("ul",pe,[(d(!0),g(j,null,A(i.password.errors,(o,z)=>(d(),g("li",{key:z},r(o.message),1))),128))])]),_:2},1024)):f("",!0)]),t("div",ce,[s(e(x),{variant:"in"},{default:l(()=>[s(e(w),null,{default:l(()=>[s(e(b),{class:"pi pi-unlock"}),s(e(M),{id:"password_confirmation",modelValue:u.value.password_confirmation,"onUpdate:modelValue":a[5]||(a[5]=o=>u.value.password_confirmation=o),type:"text",name:"password_confirmation",feedback:!1,"toggle-mask":"",fluid:""},null,8,["modelValue"])]),_:1}),t("label",fe,r(e(n)("confirm_password")),1)]),_:1}),(R=i.password_confirmation)!=null&&R.invalid?(d(),c(e(v),{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[t("ul",_e,[(d(!0),g(j,null,A(i.password_confirmation.errors,(o,z)=>(d(),g("li",{key:z},r(o.message),1))),128))])]),_:2},1024)):f("",!0)]),s(e(F),{type:"submit",label:e(n)("register"),loading:V.value},null,8,["label","loading"]),t("div",ve,[s(e(F),{link:"","as-child":""},{default:l(o=>[s(p,{to:{name:"auth.login"},class:O([o.class,"hover:underline"])},{default:l(()=>[h(r(e(n)("already_have_an_account"))+"? ",1),t("strong",null,r(e(n)("login")),1)]),_:2},1032,["class"])]),_:1})])]}),_:1},8,["initial-values","resolver"]),a[7]||(a[7]=t("div",{class:"text-sm text-slate-600"}," Lorem ipsum dolor sit, amet consectetur adipisicing elit. Impedit, accusamus blanditiis officiis asperiores optio magnam sed provident eum inventore enim ut odio unde a ipsam aliquid porro, facere et totam! ",-1))])])}}});export{Ee as default};
